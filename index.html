<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Записник з Firebase</title>
</head>
<body>

<h1>Записник з Firebase</h1>

<!-- Форма реєстрації -->
<div>
    <input type="email" id="registerEmail" placeholder="Ваш email">
    <input type="password" id="registerPassword" placeholder="Пароль">
    <button onclick="register()">Реєстрація</button>
</div>

<!-- Форма логіну -->
<div>
    <input type="email" id="loginEmail" placeholder="Ваш email">
    <input type="password" id="loginPassword" placeholder="Пароль">
    <button onclick="login()">Увійти</button>
</div>

<!-- Форма для додавання заміток -->
<div>
    <textarea id="noteInput" placeholder="Нова замітка"></textarea>
    <button onclick="addNote()">Зберегти замітку</button>
</div>

<!-- Список заміток -->
<div id="noteList"></div>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

<script>
    // Налаштування Firebase
    var firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Реєстрація
    function register() {
        const email = document.getElementById('registerEmail').value;
        const password = document.getElementById('registerPassword').value;
        auth.createUserWithEmailAndPassword(email, password)
            .then(() => {
                alert('Користувач зареєстрований!');
            })
            .catch(error => {
                alert(error.message);
            });
    }

    // Логін
    function login() {
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        auth.signInWithEmailAndPassword(email, password)
            .then(() => {
                alert('Вхід успішний!');
                loadNotes();
            })
            .catch(error => {
                alert(error.message);
            });
    }

    // Додавання замітки
    function addNote() {
        const noteText = document.getElementById('noteInput').value;
        const user = auth.currentUser;
        if (user && noteText) {
            db.collection('notes').add({
                userId: user.uid,
                text: noteText
            });
            document.getElementById('noteInput').value = '';
            loadNotes();
        } else {
            alert('Будь ласка, увійдіть і введіть замітку.');
        }
    }

    // Завантаження заміток
    function loadNotes() {
        const user = auth.currentUser;
        if (user) {
            db.collection('notes').where('userId', '==', user.uid).get()
                .then(snapshot => {
                    const noteList = document.getElementById('noteList');
                    noteList.innerHTML = '';
                    snapshot.forEach(doc => {
                        const note = document.createElement('div');
                        note.textContent = doc.data().text;
                        noteList.appendChild(note);
                    });
                });
        }
    }
</script>

</body>
</html>
